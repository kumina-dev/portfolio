---
import PageLayout from "../layouts/PageLayout.astro";
import StatusCard from "../components/system/StatusCard.astro";
import EventLog from "../components/system/EventLog.astro";
import Card from "../components/ui/Card.astro";
import { SITE } from "../const/site";
import status from "../data/status.json";
import events from "../data/event-log.json";
import { getProjects } from "../lib/content";

const projects = await getProjects();
const featured = projects[0];
---
<PageLayout title="Dashboard">
	<div class="grid gap-8 lg:grid-cols-[1fr_360px]">
		<section>
			<h1 class="text-3xl font-semibold tracking-tight">{SITE.name}</h1>
			<p class="mt-2 text-white/70">{SITE.description}</p>

			<div class="mt-6 flex gap-3">
				<a class="rounded-xl border border-white/10 bg-white/3 px-4 py-2 text-sm" href="/projects">
					View projects
				</a>
				<a class="rounded-xl border border-white/10 bg-white/3 px-4 py-2 text-sm" href="/contact">
					Contact
				</a>
			</div>

			<div class="mt-10 grid gap-4 sm:grid-cols-2">
				{status.map((s) => <StatusCard label={s.label} value={s.value} hint={s.hint} />)}
			</div>

			{featured ? (
				<div class="mt-10">
					<h2 class="text-lg font-semibold text-white/90">Featured</h2>
					<Card class="mt-3 p-5">
						<div class="font-mono text-xs text-white/50">project</div>
						<a class="mt-1 block text-xl text-white/90" href={`/projects/${featured.data.slug}`}>
							{featured.data.title}
						</a>
						<p class="mt-2 text-white/70">{featured.data.summary}</p>
						<div class="mt-3 text-sm text-white/60">
							{featured.data.stack.join(" Â· ")}
						</div>
					</Card>
				</div>
			) : null}
		</section>

		<section class="space-y-4">
			<EventLog items={events} />
			<Card class="p-4">
				<div class="font-mono text-xs text-white/50">Quick links</div>
				<div class="mt-3 flex flex-col gap-2 text-sm">
					<a href={SITE.links.github}>GitHub</a>
					<a href="/stack">Capabilities</a>
					<a href="/now">Now</a>
				</div>
			</Card>
		</section>
	</div>
</PageLayout>
